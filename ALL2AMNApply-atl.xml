<?xml version="1.0"?>
<project name="ALL2AMNApply" default="all" basedir=".">

	<property name="metamodelPath" value="metamodel/" />
	<property name="sourcePath" value="input/" />
	<property name="targetPath" value="output/" />
	<property name="transformationPath" value="transformation/" />	
	
	<property name="sourceName" value="rdf_input" />
	<property name="targetName" value="${sourceName}-amn" />
	<property name="transformationName" value="ALL2AMN" />	
	
	
	<target name="all">
		<!-- Loading metamodels -->		
		<atl.loadModel name="AMN" metamodel="%EMF" path="${metamodelPath}AMN.ecore"/>
		<atl.loadModel name="SW" metamodel="%EMF" path="${metamodelPath}SW.ecore"/>
		
		
		<!-- Loading input model -->
		<atl.loadModel name="${sourceName}" metamodel="RRO" path="${sourcePath}${sourceName}.xmi" />
  
		<atl.launch path="${transformationPath}${transformationName}.asm">
		    <inmodel name="IN" model="${sourceName}"/>
			<outModel name="OUT" model="${targetName}" metamodel="AMN" />
		</atl.launch>

		<atl.saveModel model="${targetName}" path="${targetPath}${targetName}.ecore"/>		
		
		
		<atl.launch  path="${transformationPath}AMN2Text.asm">
			<inmodel name="IN" model="${targetName}"/>			
			<library name="ATL2String" path="${transformationPath}AMN2String.asm"/>
		</atl.launch>			
		
	</target>

</project>